{% extends "base.html" %}

{% block title %}Warehouse Management - Home{% endblock %}

{% block content %}
<h1>Warehouse Management</h1>

<a href="{{ url_for('create_warehouse') }}" class="btn btn-primary">
    Create New Warehouse
</a>

<h2>Your Warehouses</h2>

{% if warehouses %}
<ul class="warehouse-list">
    {% for warehouse_id, warehouse in warehouses.items() %}
    <li class="warehouse-item">
        <h3>{{ warehouse.name }}</h3>
        <p>
            Capacity: {{ warehouse.varasto.tilavuus }} |
            Balance: {{ warehouse.varasto.saldo }} |
            Space left: {{ warehouse.varasto.paljonko_mahtuu() }}
        </p>
        {% if warehouse.varasto.tilavuus > 0 %}
        <div class="progress-bar">
            {% set fill = (warehouse.varasto.saldo / warehouse.varasto.tilavuus) * 100 %}
            <div class="progress-fill" style="width: {{ fill }}%"></div>
        </div>
        {% endif %}
        <a href="{{ url_for('view_warehouse', warehouse_id=warehouse_id) }}" class="btn btn-primary">View</a>
        <a href="{{ url_for('edit_warehouse', warehouse_id=warehouse_id) }}" class="btn btn-secondary">Edit</a>
        <form action="{{ url_for('delete_warehouse', warehouse_id=warehouse_id) }}" method="post" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this warehouse?');">
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No warehouses yet. Create your first warehouse!</p>
{% endif %}
{% endblock %}
